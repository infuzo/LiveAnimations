using strange.extensions.signal.impl;
using strange.extensions.command.impl;
using Runner.Views;
using Runner.Models;
using UnityEngine;

namespace Runner.Controllers.Player
{

    public class ChangeInvulnerabilitySignal : Signal<bool> { }

    public class ChangeInvulnerabilityCommand : Command
    {

        [Inject]
        public bool NewInvulnerabilityValue { get; private set; }
        [Inject]
        public PlayerView PlayerView { get; private set; }

        public override void Execute()
        {
            PlayerView.SetLayer(NewInvulnerabilityValue ? PlayerModel.LayerNameInvulnerable : PlayerModel.LayerNameDefault);
            Color materialColor = PlayerView.MainMaterial.color;
            materialColor.a = NewInvulnerabilityValue ? .4f : 1f;
            PlayerView.MainMaterial.color = materialColor;
        }

    }

}